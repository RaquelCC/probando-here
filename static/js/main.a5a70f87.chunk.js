(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(t,e,n){t.exports=n(21)},18:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(10),r=n.n(i),s=(n(18),n(8)),c=n.n(s),l=n(7),u=n(11),h=n(1),p=n(2),d=n(4),g=n(3),m=n(6),f=n(5),v=(n(20),function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(g.a)(e).call(this,t))).platform=null,n.map=null,n.state={app_id:t.app_id,app_code:t.app_code,center:{lat:t.lat,lng:t.lng},zoom:t.zoom,theme:t.theme,style:t.style},n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"shouldComponentUpdate",value:function(t,e){return this.changeTheme(t.theme,t.style),!0}},{key:"changeTheme",value:function(t,e){var n=this.platform.getMapTileService({type:"base"}).createTileLayer("maptile",t,256,"png",{style:e});this.map.setBaseLayer(n)}},{key:"componentDidMount",value:function(){this.platform=new window.H.service.Platform(this.state);var t=this.platform.createDefaultLayers(),e=this.refs["here-map"];this.map=new window.H.Map(e,t.normal.map,{center:this.state.center,zoom:this.state.zoom});var n=new window.H.mapevents.MapEvents(this.map);new window.H.mapevents.Behavior(n),new window.H.ui.UI.createDefault(this.map,t)}},{key:"componentDidUpdate",value:function(){var t=this;this.props.startingPoint&&this.props.endingPoint&&(console.log("props!"),this.routeLine&&this.map.removeObjects([this.routeLine,this.startMarker,this.endMarker]),this.routingParameters={mode:"fastest;pedestrian",waypoint0:"geo!"+this.props.startingPoint.lat+","+this.props.startingPoint.long,waypoint1:"geo!"+this.props.endingPoint.lat+","+this.props.endingPoint.long,representation:"display"},console.log(this.routingParameters),this.onResult=function(e){var n,a,o,i,r;console.log(e),e.response&&e.response.route&&(a=(n=e.response.route[0]).shape,r=new window.H.geo.LineString,a.forEach(function(t){var e=t.split(",");r.pushLatLngAlt(e[0],e[1])}),o=n.waypoint[0].mappedPosition,i=n.waypoint[1].mappedPosition,t.routeLine=new window.H.map.Polyline(r,{style:{strokeColor:"blue",lineWidth:2}}),t.startMarker=new window.H.map.Marker({lat:o.latitude,lng:o.longitude}),t.endMarker=new window.H.map.Marker({lat:i.latitude,lng:i.longitude}),t.map.addObjects([t.routeLine,t.startMarker,t.endMarker]),t.map.setViewBounds(t.routeLine.getBounds()))},this.router=this.platform.getRoutingService(),this.router.calculateRoute(this.routingParameters,this.onResult,function(t){alert(t.message)}))}},{key:"render",value:function(){return o.a.createElement("div",{ref:"here-map",style:{width:"100%",height:"400px",background:"grey"}})}}]),e}(o.a.Component)),w=function(t){function e(){return Object(h.a)(this,e),Object(d.a)(this,Object(g.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t=[],e=this.props.changeTheme;return["normal.day","normal.day.grey","normal.day.transit","normal.night","normal.night.grey","reduced.night","reduced.day","pedestrian.day","pedestrian.night"].forEach(function(n){t.push(o.a.createElement("img",{key:n,src:"images/"+n+".thumb.png",onClick:e,alt:n,id:n}))}),o.a.createElement("div",null,t)}}]),e}(o.a.Component),y=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(g.a)(e).call(this,t))).state={start:"",end:""},n.handleChangeInput=n.handleChangeInput.bind(Object(m.a)(n)),n.handleChangeInput2=n.handleChangeInput2.bind(Object(m.a)(n)),n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"handleChangeInput",value:function(t){this.setState(Object(l.a)({},this.state,{start:t.target.value}))}},{key:"handleChangeInput2",value:function(t){this.setState(Object(l.a)({},this.state,{end:t.target.value}))}},{key:"render",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("input",{onChange:function(e){return t.handleChangeInput(e)},value:this.state.start,placeholder:"inicio recorrido"}),o.a.createElement("input",{onChange:function(e){return t.handleChangeInput2(e)},value:this.state.end,placeholder:"final recorrido"}),o.a.createElement("button",{onClick:function(){return t.props.getCoordinates(t.state.start,t.state.end)}},"Planificar"))}}]),e}(o.a.Component),b=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(d.a)(this,Object(g.a)(e).call(this,t))).state={app_id:"aNF8XAILH0I6wrjlttyu",app_code:"x5U_rooRVBrH10t0UyX4Sw",theme:"normal.day",startingPoint:{lat:"",long:""},endingPoint:{lat:"",long:""}},n.onChange=n.onChange.bind(Object(m.a)(n)),n.getCoordinates=n.getCoordinates.bind(Object(m.a)(n)),n}return Object(f.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=this;navigator.geolocation&&(console.log(navigator.geolocation),navigator.geolocation.getCurrentPosition(function(e){t.setState({lat:e.coords.latitude,long:e.coords.longitude,error:null})},function(e){t.setState({error:e.message})}))}},{key:"onChange",value:function(t){t.preventDefault();var e=t.target.id;this.setState({theme:e})}},{key:"getCoordinates",value:function(){var t=Object(u.a)(c.a.mark(function t(e,n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://geocoder.api.here.com/6.2/geocode.json?app_id="+this.state.app_id+"&app_code="+this.state.app_code+"&searchtext="+e).then(function(t){return t.json()}).then(function(t){return{lat:t.Response.View[0].Result[0].Location.NavigationPosition[0].Latitude,long:t.Response.View[0].Result[0].Location.NavigationPosition[0].Longitude,address:t.Response.View[0].Result[0].Location.Address.Label}});case 2:return this.startingPoint=t.sent,t.next=5,fetch("http://geocoder.api.here.com/6.2/geocode.json?app_id="+this.state.app_id+"&app_code="+this.state.app_code+"&searchtext="+n).then(function(t){return t.json()}).then(function(t){return{lat:t.Response.View[0].Result[0].Location.NavigationPosition[0].Latitude,long:t.Response.View[0].Result[0].Location.NavigationPosition[0].Longitude,address:t.Response.View[0].Result[0].Location.Address.Label}});case 5:return this.endingPoint=t.sent,t.next=8,fetch("http://route.api.here.com/routing/7.2/calculateroute.json?app_id="+this.state.app_id+"&app_code="+this.state.app_code+"&waypoint0=geo!"+this.startingPoint.lat+","+this.startingPoint.long+"&waypoint1=geo!"+this.endingPoint.lat+","+this.endingPoint.long+"&mode=fastest;pedestrian;traffic:disabled").then(function(t){return t.json()}).then(function(t){return t.response.route[0].summary});case 8:this.routeSummary=t.sent,this.setState(Object(l.a)({},this.state,{startingPoint:Object(l.a)({},this.startingPoint),endingPoint:Object(l.a)({},this.endingPoint),routeSummary:this.routeSummary}));case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v,{app_id:this.state.app_id,app_code:this.state.app_code,lat:"-33.4489",lng:"-70.6693",zoom:"12",theme:this.state.theme,startingPoint:this.state.startingPoint,endingPoint:this.state.endingPoint}),o.a.createElement(w,{changeTheme:this.onChange}),o.a.createElement(y,{getCoordinates:this.getCoordinates}),o.a.createElement("div",null,this.state.lat?this.state.lat:"nada"),o.a.createElement("div",null,this.state.long?this.state.long:"nada"))}}]),e}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.a5a70f87.chunk.js.map